<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>OHMAN â€” Central Essay</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- Navigation toggle -->
  <div id="nav-toggle">
    <span></span>
    <span></span>
    <span></span>
  </div>

  <!-- Sidebar menu -->
  <nav id="nav-menu">
    <ul>
        <li><a href="OCCBP.html">OCCBP</a></li>
        <li><a href="index.html">OHMAN</a></li>
        <li><a href="OLP.html">OLP</a></li>
        <li><a href="ORTTYAR.html">ORTTYAR</a></li>
        <li><a href="ORVBUIB.html">ORVBUIB</a></li>
        <li><a href="OWAO.html">OWAO</a></li>
        <li><a href="OWTM.html">OWTM</a></li>
    </ul>
  </nav>

  <!-- Main content -->
  <div id="main-content"></div>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script>
    async function loadMainEssay() {
      const mainContainer = document.getElementById("main-content");
      const text = await fetch("content/OHMAN.md").then(r => r.text());
      mainContainer.innerHTML = marked.parse(text);

      // Set up the special ending switcher
      const switcher = document.getElementById("ending-switch");
      if (switcher) {
        const endingDiv = document.createElement("div");
        endingDiv.id = "ending-container";
        mainContainer.appendChild(endingDiv);

        const endings = ["content/alt_endings/OHMAN_end1.md", "content/alt_endings/OHMAN_end2.md"];
        let currentEnding = Math.random() < 0.5 ? 0 : 1;

        async function showEnding(index) {
          const md = await fetch(endings[index]).then(r => r.text());
          endingDiv.innerHTML = marked.parse(md);
          currentEnding = index;
        }

        // Show one ending initially
        showEnding(currentEnding);

        // Toggle on click
        switcher.addEventListener("click", (e) => {
          e.preventDefault();
          const newIndex = currentEnding === 0 ? 1 : 0;
          showEnding(newIndex);
        });
      }
    }

    // Nav toggle
    document.getElementById("nav-toggle").addEventListener("click", function() {
      this.classList.toggle("active");
      document.getElementById("nav-menu").classList.toggle("hidden");
    });

    loadMainEssay();
  </script>
</body>
</html>


